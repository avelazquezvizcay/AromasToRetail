<div class="page-width col-sm-4{% if cart == empty %} hide{% endif %}" id="cart-footer" data-id="{{ section.id }}">
  <div class="cart__footer">
    {%- if section.settings.show_cart_note -%}
    <cart-note class="cart__note field">
      <label for="Cart-note">{{ 'cart.general.note' | t }}</label>
      <textarea class="text-area text-area--resize-vertical field__input" name="note" id="Cart-note" placeholder="{{ 'cart.general.note' | t }}">{{ cart.note }}</textarea>
    </cart-note>
    {%- endif -%}

    <div class="cart__blocks">
      {% for block in section.blocks %}
      {% if block.type != 's_text' %}
      {%- case block.type -%}
      {%- when '@app' -%}
      {% render block %}
      {%- when 'subtotal' -%}
      <div class="js-contents" {{ block.shopify_attributes }}>
        <div class="totals">
          <h3 class="totals__subtotal">{{ 'cart.general.carttotal' | t }}</h3>
          <p class="totals__subtotal-value">{{ cart.total_price | money_with_currency }}</p>
        </div>
        {%- if cart.cart_level_discount_applications.size > 0 -%}
        <div>
          <ul class="discounts list-unstyled" role="list" aria-label="{{ 'customer.order.discount' | t }}">
            {%- for discount in cart.cart_level_discount_applications -%}
            <li class="discounts__discount discounts__discount--end">
              {{ discount.title }}
              (-{{ discount.total_allocated_amount | money }})
            </li>
            {%- endfor -%}
          </ul>
        </div>
        {%- endif -%}
        <p class="tax-note caption-large rte">{{ 'cart.general.taxes_extra' | t }}</p>
      </div>
      {%- else -%}
      <div class="cart__ctas" {{ block.shopify_attributes }}>
        <noscript>
          <button type="submit" class="cart__update-button button button--secondary" form="cart">
            {{ 'cart.general.update' | t }}
          </button>
        </noscript>
        {% if settings.trumsandcondition_id != blank %}
                       <p style="float: none; clear: both; margin: 10px 0 15px 0;" class="cart_condition">
  <input style="float:none; vertical-align: middle;" type="checkbox" id="agree1" />
  <label style="display:inline; float:none" for="agree1">
    {{ 'cart.label.agree' | t }} <a target="_" href="/pages/terms-condition">{{ 'cart.label.agree_page' | t }}</a>.
  </label>
</p>
{% endif %}  
        <button type="submit" id="checkout" {% if settings.trumsandcondition_id == blank %} onclick="window.location='/checkout'" {% endif %} class="cart__checkout-button button btn" name="checkout"{% if cart == empty %} disabled{% endif %} form="cart" >
          {{ 'cart.general.checkout' | t }}
        </button>
      </div>

      {%- if additional_checkout_buttons -%}
      <div class="cart__dynamic-checkout-buttons additional-checkout-buttons">
        {{ content_for_additional_checkout_buttons }}
      </div>
      {%- endif -%}
      {%- endcase -%}
      {% endif %}
      {% endfor %}
      <div id="cart-errors"></div>
    </div>
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    function isIE() {
      const ua = window.navigator.userAgent;
      const msie = ua.indexOf('MSIE ');
      const trident = ua.indexOf('Trident/');

      return (msie > 0 || trident > 0);
    }

    if (!isIE()) return;
    const cartSubmitInput = document.createElement('input');
    cartSubmitInput.setAttribute('name', 'checkout');
    cartSubmitInput.setAttribute('type', 'hidden');
    document.querySelector('#cart').appendChild(cartSubmitInput);
    document.querySelector('#checkout').addEventListener('click', function(event) {
      document.querySelector('#cart').submit();
    });
  });
</script>
{% if settings.trumsandcondition_id != blank %}
<script>
       $(document).ready(function() {
    $('.cart__blocks .cart__checkout-button').click(function() {
      if ($('#agree1').is(':checked')) {
        window.location='/checkout';
        $(this).submit();
      }
      else {
        alert("{{ 'cart.popup.empty_condition' | t }}");
        return false;
      }
    });
  });
</script>
  {% endif %}
{% schema %}
{
"name": "cart-footer",
"class": "cart__footer-wrapper",
"settings": [
{
"type": "checkbox",
"id": "show_cart_note",
"default": true,
"label": "Show Cart note"
}
],
"blocks": [
{
"type": "subtotal",
"name": "Subtotal",
"limit": 1
},
{
"type": "buttons",
"name": "Buttons",
"limit": 1
}
]
}
{% endschema %}
